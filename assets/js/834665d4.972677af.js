"use strict";(self.webpackChunksraddhanand=self.webpackChunksraddhanand||[]).push([[5717],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return d}});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),i=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=i(e.components);return a.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),u=i(n),d=o,h=u["".concat(l,".").concat(d)]||u[d]||m[d]||r;return n?a.createElement(h,s(s({ref:t},p),{},{components:n})):a.createElement(h,s({ref:t},p))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,s=new Array(r);s[0]=u;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:o,s[1]=c;for(var i=2;i<r;i++)s[i]=n[i];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},4305:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return d},frontMatter:function(){return c},metadata:function(){return i},toc:function(){return m}});var a=n(7462),o=n(3366),r=(n(7294),n(3905)),s=["components"],c={id:"compose-cheat-sheet",title:"Docker compose CLI Cheat sheet",sidebar_label:"docker-compose commands"},l=void 0,i={unversionedId:"compose/compose-cheat-sheet",id:"compose/compose-cheat-sheet",title:"Docker compose CLI Cheat sheet",description:"---",source:"@site/docs/compose/cheat-sheet.md",sourceDirName:"compose",slug:"/compose/compose-cheat-sheet",permalink:"/docs/compose/compose-cheat-sheet",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/compose/cheat-sheet.md",tags:[],version:"current",frontMatter:{id:"compose-cheat-sheet",title:"Docker compose CLI Cheat sheet",sidebar_label:"docker-compose commands"},sidebar:"Containers",previous:{title:"stop",permalink:"/docs/compose/compose-stop"}},p={},m=[{value:"Bring up the containers",id:"bring-up-the-containers",level:2},{value:"Logs of all containers",id:"logs-of-all-containers",level:2},{value:"Verify containers",id:"verify-containers",level:2},{value:"Stop and deleting the containers",id:"stop-and-deleting-the-containers",level:2}],u={toc:m};function d(e){var t=e.components,n=(0,o.Z)(e,s);return(0,r.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"bring-up-the-containers"},"Bring up the containers"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Just like docker run, docker-compose up simply launches the containers and once the entrypoint commands run, it will bring down the containers."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose up\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Run all the containers in the detach mode. By default docker-compose looks for docker-compose.y(a)ml file."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose up -d\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Specify the compose file name to launch containers."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose -f docker-compose-dev.yaml up -d\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Build the images and then run the docker images")," . For this, we need to specify the Dockerfile name in the compose file for the services which need to be build. In most of the cases we don't need to build all the images. In such cases, we can specify the dockerfile file for the service of our interest. For the rest of the services it will check for the images flag to run the container."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ docker-compose up -d --build\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"When the service names modified or services are deleted from the compose file, run up command with ",(0,r.kt)("code",null,"--remove-orphans")," flag to delete the unused containers."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose up -d --remove-orphans\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Scale the service or specify how many containers should be run for the particular service using the scale flag."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ docker-compose up -d --scale SERVICE=NUM\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"You can scale single or multiple services in a single run."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ docker-compose up -d --scale web=2\n$ docker-compose up -d --scale web=2 app=3\n")),(0,r.kt)("p",{parentName:"li"},"docker-compose scale command is depreciated in the latest version."))),(0,r.kt)("h2",{id:"logs-of-all-containers"},"Logs of all containers"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Docker-compose gives the ability to view the logs of all the containers at a time. It will be easier to troubleshoot how a single request behaves to the application instead of using multiple terminals for container log.")),(0,r.kt)("p",null,"Check the logs for all the containers launched by compose file in ",(0,r.kt)("code",null,"\\$PWD")," (present working directory). It will give the entire log of the container starting from the launch of the container."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose logs\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"To get the last 10 lines")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose logs --tail 10\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"To get the last 10 lines and follow output logs.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose logs --tail 10 -f\n")),(0,r.kt)("h2",{id:"verify-containers"},"Verify containers"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"when you run docker ps, it lists all the running containers by the docker engine. But when you run docker-compose ps it lists only those containers which are running using the docker-compose.yml file in \\$PWD.",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose ps\n"))),(0,r.kt)("li",{parentName:"ul"},"Displays what are the running processes inside the containers. It can give the better picture than regular ps -ef command in the container.",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose top\n")))),(0,r.kt)("h2",{id:"stop-and-deleting-the-containers"},"Stop and deleting the containers"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"stop all the containers of the services defined in the compose file.",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose stop\n"))),(0,r.kt)("li",{parentName:"ul"},"Delete all the stopped containers",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose rm\n"))),(0,r.kt)("li",{parentName:"ul"},"Delete all the containers and networks. It does exactly opposite of docker-compose up.",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose down\n")))))}d.isMDXComponent=!0}}]);